name: hexo Push And Deploy
run-name: ${{ github.actor }} is testing out GitHub Actions üöÄ
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - name: checkout codes
        uses: actions/checkout@v1
        with:
          ref: backup
      - name: Setup node.js
        uses: actions/setup-node@v2
        with:
          node-version: '14'

      - name: Install Dependency
        run: |
          npm install -g hexo-cli
          echo 'PATH="$PATH:./node_modules/.bin"' >> ~/.profile
          npm install hexo-deployer-git -save
          npm install
      - name: ssh to git repo
         env:
          ACTION_DEPLOY_KEY: ${{secrets.Hexo_Deploy_Key}}
        run: |
          mkdir -p ~/.ssh/
          echo "$ACTION_DEPLOY_KEY" > ~/.ssh/id_rsa
          chmod 700 ~/.ssh
          chmod 600 ~/.ssh/id_rsa
          ssh-keyscan github.com >> ~/.ssh/know_hosts
          git config --global user.name CarrotVegeta
          git config --global user.email 1305115562@qq.com
      - name: hexo clean and hexo g and hexo d
        run: | 
          hexo clean
          hexo g
          hexo d
      - run: echo "üçè This job's status is ${{ job.status }}."
